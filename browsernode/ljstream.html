<!doctype html>
<html>
<head>
	<meta http-equiv="charset" content="text/html; charset=utf-8">
	<title>LiveJournal stream demo{{ " (dev)" if dev_mode else "" }} | BrowserNode</title>
	<link rel="stylesheet" type="text/css" href="static/ljstream.css">
</head>
<body>

<div id="demo-header">
	<div id="demo-header-text">
		<h1>LiveJournal stream, all public posts</h1>

		<p>
			This is uncensored.  If you don't want to see any objectionable text or links, <a href="/">navigate away now</a>.
		</p>

		<div id="prefs">
			<label class="pref-label">
				<input type="checkbox" id="include_russian_posts" checked> Show new Russian posts
			</label>

			<label class="pref-label">
				<input type="checkbox" id="automatic_scroll" checked> Automatic scroll
			</label>
		</div>
	</div>
</div>

<div id="minerva-xdrframes"></div>
<div id="ljstream-container"></div>
<div id="ljstream-big-empty"></div>
<div id="log"></div>

<script>
// Use just one preamble <script> to reduce page load time.

// We don't define anything on "window" to avoid possible IE stack limit of 12
// when calling through window.
CSRF_TOKEN = {{ dumps(bootstrap.csrf_token) }};
__XDRSetup = {
	dev: {{ dumps(dev_mode) }},
	domain: {{ dumps(domain) }},
	sub1: {{ dumps(bootstrap.sub1) }},
	sub2: {{ dumps(bootstrap.sub2) }}
};
{{ bootstrap.XDRSetup_contents }}
</script>

{% if dev_mode %}
<script>CLOSURE_NO_DEPS = true;</script>
<script src="/JSPATH/closure/goog/base.js"></script>
<script src="/JSPATH/all_deps.js"></script>
<script>
goog.require('ljstream');
</script>
{% else %}
<script src="/compiled/ljstream.js"></script>
{% endif %}
<script>
__ljstream_init();
</script>

</body>
</html>
