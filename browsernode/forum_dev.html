<!doctype html>
<html>
<head>
	<meta http-equiv="charset" content="text/html; charset=utf-8">
	<title></title>
	<style>
		{{ getTestPageCSS() }}

		#controls tr td {
			padding: 0.5em 0 0.5em 0;
		}
	</style>
</head>
<body>

<div id="doc">
This page supports options ?mode=http, ?mode=flash, ?useSub=0, ?useSub=1, ?httpStreaming=1, ?log=1
(which can be combined).
</div>

<table id="controls">
<tr>
	<td>Reconnect:</td>
	<td>
		<input type="submit" value="Reset" onclick="forum.resetStream('because user clicked button');return false">
		<input type="submit" value="Reset and connect new stream" onclick="forum.reconnectStream();return false">
	</td>
</tr>
<tr>
<td>
	Send text:
</td>
<td>
	<input type="text" name="textinput" id="textinput">
	<input type="submit" value="Send" onclick="forum.sendText(byId('textinput').value);return false">
</td>
</tr>
</table>

<script>
// Use just one preamble <script> to reduce page load time.

// We don't define variables on "window" to avoid possible IE stack limit of 12
// when calling through window.
CSRF_TOKEN = {{ dumps(token) }};
__XDRSetup = {
	dev: true,
	domain: {{ dumps(domain) }},
	sub1: {{ dumps(sub1) }},
	sub2: {{ dumps(sub2) }}
};
</script>
<!-- Note: in production, this script should be dumped onto the page. -->
<div id="minerva-xdrframes"></div>
<script src="/JSPATH/cw/net/bootstrap_XDRSetup.js"></script>

<div id="FlashConnectorSwf"></div>
<div id="log"></div>

<script>CLOSURE_NO_DEPS = true;</script>
<script src="/JSPATH/closure/goog/base.js"></script>
<script src="/JSPATH/all_deps.js"></script>
<script>
goog.require('forum');
</script>
<script>
__forum_init();
</script>

</body>
</html>
